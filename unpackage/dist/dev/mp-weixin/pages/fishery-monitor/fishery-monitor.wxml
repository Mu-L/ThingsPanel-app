<view class="pagehome data-v-5df5d76c"><view class="tp-box tp-box-sizing tp-pd-l-r-30 data-v-5df5d76c"><block wx:if="{{!isLogin}}"><view class="noLogin data-v-5df5d76c"><view class="fishlogo data-v-5df5d76c"><image src="/static/icon/fisheryLogo.png" class="_img data-v-5df5d76c"></image></view><view class="authLogin data-v-5df5d76c"><block wx:if="{{isGetPhone}}"><button open-type="getPhoneNumber" data-event-opts="{{[['getphonenumber',[['getPhoneNumber',['$event']]]]]}}" bindgetphonenumber="__e" class="data-v-5df5d76c">获取手机号并登录</button></block><block wx:else><button data-event-opts="{{[['tap',[['toLogin',['$event']]]]]}}" bindtap="__e" class="data-v-5df5d76c">点击登录</button></block></view></view></block><block wx:else><view style="{{'margin-top:'+(marginTop)+';'}}" class="data-v-5df5d76c"><view class="tp-fishery-select tp-flex tp-flex-row tp-flex-j-l tp-flex-a-c data-v-5df5d76c"><block wx:if="{{ytData.length>0}}"><view data-event-opts="{{[['tap',[['toMore',['$event']]]]]}}" style="display:flex;" bindtap="__e" class="data-v-5df5d76c"><text class="tp-mg-r-10 yttitle data-v-5df5d76c">{{ytTitle}}</text><view class="iconfont iconjiantou data-v-5df5d76c" style="margin-top:10rpx;"></view></view></block><block wx:else><button data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="addyt data-v-5df5d76c" bindtap="__e">添加鱼塘</button></block><block wx:if="{{ytData.length>0&&isMore}}"><view class="moreitem data-v-5df5d76c"><block wx:for="{{ytData}}" wx:for-item="m" wx:for-index="i" wx:key="i"><view data-event-opts="{{[['tap',[['changYt',['$0'],[[['ytData','',i]]]]]]]}}" class="item_i data-v-5df5d76c" bindtap="__e">{{m.title}}</view></block><view data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" class="addytt data-v-5df5d76c" bindtap="__e">+ 添加鱼塘</view></view></block></view><block wx:if="{{boxData.widget_identifier&&(boxData.widget_identifier=='fisheriesscreen:screen'||boxData.widget_identifier=='intelligentscreen:surroundings')}}"><view class="tp-grid-three tp-mg-t-25 data-v-5df5d76c"><view class="tp-panel tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-20 data-v-5df5d76c" style="background:#207AF5;margin-right:29rpx;"><view class="tp-flex tp-flex-col data-v-5df5d76c"><block wx:if="{{rjyData.latest}}"><view style="color:#fff;" class="data-v-5df5d76c">{{rjyData.latest[1]}}<text class="tp-mg-l-05 data-v-5df5d76c" style="color:#fff;">mg/L</text></view></block><block wx:if="{{rjyData.name}}"><view class="tp-mg-t-05 data-v-5df5d76c" style="color:#fff;">{{rjyData.name}}</view></block></view><view class="data-v-5df5d76c"><image src="/static/icon/icon-oxygen.png" class="data-v-5df5d76c"></image></view></view><view class="tp-panel tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-20 data-v-5df5d76c"><view class="tp-flex tp-flex-col data-v-5df5d76c"><block wx:if="{{phData.latest}}"><view class="data-v-5df5d76c">{{phData.latest[1]}}<text class="tp-mg-l-05 data-v-5df5d76c" style="white-space:nowrap;">PH值</text></view></block><block wx:if="{{phData.name}}"><view class="tp-mg-t-05 data-v-5df5d76c">{{phData.name}}</view></block></view><view class="data-v-5df5d76c"><image src="/static/icon/icon-ph.png" class="data-v-5df5d76c"></image></view></view><view class="tp-panel tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c tp-box-sizing tp-pd-20 data-v-5df5d76c"><view class="tp-flex tp-flex-col data-v-5df5d76c"><block wx:if="{{swData.latest}}"><view class="data-v-5df5d76c">{{swData.latest[1]}}<text class="tp-mg-l-05 data-v-5df5d76c" style="white-space:nowrap;">水温</text></view></block><block wx:if="{{swData.name}}"><view class="tp-mg-t-05 data-v-5df5d76c">{{swData.name}}</view></block></view><view class="data-v-5df5d76c"><image src="/static/icon/icon-water-temperature.png" class="data-v-5df5d76c"></image></view></view></view></block><view class="tp-title tp-mg-t-25 data-v-5df5d76c" style="margin-top:51rpx;margin-bottom:48rpx;">设备状态<view data-event-opts="{{[['tap',[['addEqp',['$event']]]]]}}" class="tp-add data-v-5df5d76c" bindtap="__e">+ 添加设备</view></view><block wx:if="{{boxData.widget_identifier=='fisheriesscreen:screen'||boxData.widget_identifier=='intelligentscreen:surroundings'}}"><view class="tp-panel-two tp-mg-t-25 data-v-5df5d76c"><block wx:for="{{deviceData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><block class="data-v-5df5d76c"><view class="{{['tp-flex','tp-flex-row','tp-flex-j-s','tp-flex-a-c','tp-box-sizing','tp-pd-l-r-20','tp-pd-t-b-15','eq_item','data-v-5df5d76c',!item.status?'tp-device-close':'']}}"><view class="tp-flex tp-flex-row data-v-5df5d76c"><view class="tp-mg-t-b-10 iconfontImg data-v-5df5d76c"><block wx:if="{{item.status==0}}"><image src="{{item.icon}}" class="_img data-v-5df5d76c"></image></block><block wx:if="{{item.status==1}}"><image src="{{item.iconActive}}" class="_img data-v-5df5d76c"></image></block></view><view style="margin-left:24rpx;" class="data-v-5df5d76c"><view class="tp-mg-b-05 sp_item_title data-v-5df5d76c">{{item.title}}</view><block wx:if="{{item.status==0}}"><view class="tp-mg-b-05 sp_item_status data-v-5df5d76c">关闭</view></block><block wx:if="{{item.status==1}}"><view class="tp-mg-b-05 sp_item_status data-v-5df5d76c">开启</view></block></view></view><view class="data-v-5df5d76c"><view data-event-opts="{{[['tap',[['changSwitch',['$0',index],[[['deviceData','',index]]]]]]]}}" class="tp-flex tp-flex-j-c tp-flex-a-c switch data-v-5df5d76c" bindtap="__e"><block wx:if="{{item.status==1}}"><image src="/static/icon/switch_on.png" class="_img data-v-5df5d76c"></image></block><block wx:if="{{item.status==0}}"><image src="/static/icon/switch_close.png" class="_img data-v-5df5d76c"></image></block></view></view></view></block></block></view></block><view class="tp-title tp-mg-t-25 data-v-5df5d76c" style="margin-top:75rpx;margin-bottom:36rpx;">操作日志与状态</view><block class="data-v-5df5d76c"><view class="tp-log tp-flex tp-flex-col tp-mg-t-15 data-v-5df5d76c"><block wx:for="{{logData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="tp-panel tp-flex tp-flex-col tp-box-sizing tp-pd-20 data-v-5df5d76c"><view class="tp-log-item tp-flex tp-flex-row tp-flex-j-s tp-flex-a-c data-v-5df5d76c"><view class="{{['tp-circle','tp-mg-l-r-20','data-v-5df5d76c',index==0?'tp-active':'']}}" style="margin-left:10rpx;"></view><view class="tp-flex-1 data-v-5df5d76c">{{item.describe}}</view><view class="tp-time data-v-5df5d76c">{{item.created_at}}</view></view></view></block></view></block><view class="tp-tmp data-v-5df5d76c"></view></view></block></view><uni-popup vue-id="4f9df5fc-1" mask-click="{{false}}" data-ref="addpopup" class="data-v-5df5d76c vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><view class="add data-v-5df5d76c"><view class="addtitle data-v-5df5d76c">添加鱼塘</view><view class="addcontent data-v-5df5d76c"><input type="text" placeholder="请输入鱼塘" data-event-opts="{{[['input',[['__set_model',['','ytName','$event',[]]]]]]}}" value="{{ytName}}" bindinput="__e" class="data-v-5df5d76c"/></view><view class="addbtn data-v-5df5d76c"><button data-event-opts="{{[['tap',[['e2',['$event']]]]]}}" class="cancelbtn data-v-5df5d76c" bindtap="__e">取消</button><button data-event-opts="{{[['tap',[['toAddConfirm',['$event']]]]]}}" class="confirmbtn data-v-5df5d76c" bindtap="__e">确定</button></view></view></uni-popup><uni-popup vue-id="4f9df5fc-2" type="bottom" data-ref="authPopup" class="data-v-5df5d76c vue-ref" bind:__l="__l" vue-slots="{{['default']}}"><authorize bind:getuserinfo="__e" bind:cancel="__e" vue-id="{{('4f9df5fc-3')+','+('4f9df5fc-2')}}" data-event-opts="{{[['^getuserinfo',[['getAuth']]],['^cancel',[['toCloseLogin']]]]}}" class="data-v-5df5d76c" bind:__l="__l"></authorize></uni-popup><cys-toast vue-id="4f9df5fc-4" msg="{{toast.msg}}" direction="{{row}}" location="top" data-ref="toast" class="data-v-5df5d76c vue-ref" bind:__l="__l"></cys-toast></view>